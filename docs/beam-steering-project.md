# 디지털 빔조향 프로젝트 (마스터 문서)

> 한 편에서 목차를 관리하고, **질문을 던지며 다음 단계로 넘어가는 방식**으로 점진적으로 구체화한다.  
> 워크플로: **목차 수준3 확립 → 글쓰기** (에이전트: `docs/agents/beam-steering-writer.md`)

---

## 문서의 흐름 (질문 유도)

1. **디지털 빔조향이란?** → 개념과 우리가 다루는 범위
2. **시스템은 어떻게 구성되어 있는가?** → 안테나·고주파·제어·메모리
3. **보정은 왜, 어떻게 필요한가?** → 채널 보정, 각도 보정, 빔조향(이론) 데이터
4. **메모리와 제어는 어떻게 이루어지는가?** → EEPROM/BRAM, 제어 입력과 MFC 제어
5. **실제로 시험은 어떻게 할 것인가?** → 보정 수집 방법, 각도 보정과 근접전계, 시험 절차

---

## 시스템 구성 개요 (참고용 — 글쓰기 기준)

- **안테나**: 배열 10채널 중 **8채널** 사용. RF 케이블로 고주파 모듈과 연결.
- **고주파 모듈**: 8ch 입력 → 각 **LNA** → **디바이더** → **빔조향 경로 #1, #2**.  
  각 경로: 8× **MFC1**(채널 보정) → 8× **MFC2**(각도 보정) → 8ch 합산 → **경로당 출력 1개**.  
  고주파 모듈 출력 = **2개**(경로별 1개).
- **제어 모듈**: LNA·MFC 제어(경로별·채널별 **16개**). 내부 **EEPROM** + **BRAM**; 전원 시 EEPROM → BRAM 로드.
- **메모리**: 채널보정 / 각도보정 / 빔조향(조향각별 이론 TTD).  
  외부 입력: **주파수, 조향각, 빔조향 경로 선택** → 메모리 참조 → MFC 제어.
- **열린 질문**: 각도 보정은 근접전계 필요 여부, 시험 방법.

---

## 목차 (수준 3까지: h1/h2/h3)

> 아래는 “목차”이면서 동시에 **1장(개요)**는 초록/개요급 근거를 바탕으로 먼저 확장한다.  
> 나머지 장은 동일한 방식(질문 → 답 → 다음 질문)으로 점진적으로 채운다.

## 1. 디지털 빔조향이란?

### 1.1 우리가 말하는 “디지털 빔조향”의 범위

- **질문 1) ‘디지털 빔조향’은 정확히 무엇을 뜻하나?**
  - 문헌에서 **Digital Beamforming(DBF)**은 “소자(또는 채널) 단에서 디지털화(ADC 등)된 신호에 가중치(위상/진폭)를 곱해 합성하여 빔을 만드는 방식”을 가리키는 경우가 많다. 이 접근은 **동시에 여러 빔**을 만들거나(멀티빔), **적응형 빔포밍** 같은 고급 처리가 가능하다는 점이 반복적으로 강조된다. (예: Cadence 개요 글)
  - 반대로 **Analog Beamforming**은 RF/IF 영역에서 위상천이기(PS)·감쇠기(ATT) 등을 사용해 채널 간 위상/진폭을 맞춰 빔을 만드는 방식으로 요약된다. (Cadence 개요 글)
  - 5G mmWave처럼 안테나 수가 커질수록 “소자당 RF 체인/ADC”는 비용·전력·복잡도 때문에 비현실적이어서, **Hybrid Beamforming(아날로그+디지털 혼합)**이 비용 효율적 대안으로 자주 언급된다. (IEEE SPS 블로그)

- **질문 2) 그럼 우리 시스템은 ‘디지털’인가 ‘아날로그’인가?**
  - 우리 시스템은 “소자당 ADC로 완전 디지털 빔포밍”을 구현하려는 것이 아니라,
    - **MFC(ATT/TTD 제어)**로 채널을 보정/조향하고
    - 그 값을 **제어 모듈이 디지털로 계산/선택(LUT)** 해서 내려주는 구조다.
  - 따라서 이 문서에서 말하는 “디지털 빔조향”은 다음을 의미한다.
    - **(정의)** *디지털 제어(메모리/LUT/알고리즘)를 통해 아날로그 빔형성 요소(ATT/TTD/PS)를 구동하여, 원하는 조향각의 빔을 재현하는 시스템*  
    - 즉, **디지털 제어 기반 빔조향 시스템 설계·보정·시험**이 핵심이며, DBF의 “풀 디지털”과는 구분해 다룬다.

- **질문 3) 왜 ‘TTD’가 계속 등장하나? (위상천이만으로는 안 되나?)**
  - 초록/개요급 글에서 반복되는 핵심은 **빔 스퀸트(beam squint)** 문제다.
    - **위상천이기(PS)**는 “주파수에 대해 위상이 일정”한 방식이라, 같은 설정으로도 주파수가 바뀌면 조향각이 달라져 **광대역에서 빔이 틀어질 수 있다**고 설명된다. (Analog Devices)
    - **True Time Delay(TTD)**는 “주파수에 대해 위상의 기울기(phase slope)가 일정”해 광대역에서 **조향각을 더 일관되게 유지**할 수 있고, 그래서 대역폭이 커질수록 TTD 채택이 늘어난다는 요지가 반복된다. (Analog Devices, Qorvo)
  - 결론적으로, 우리처럼 “주파수 입력”을 받고 “조향각을 바꾸는” 시스템에서는
    - 주파수 범위(IBW)·빔폭·요구 정확도에 따라 **PS만으로 충분한지, TTD가 필요한지(혹은 혼합)**를 질문으로 두고 설계를 진행해야 한다.

### 1.2 이 문서/시스템에서 풀려는 질문

- **질문 A) ‘디지털 빔조향’이 여기서 해결해야 하는 문제는 무엇인가?**
  - “조향각(θ)을 바꾸면 빔이 바뀐다”는 개념 설명을 넘어,
    - **주파수(f)**, **조향각(θ)**, **경로 선택(#1/#2)** 입력이 주어졌을 때
    - **어떤 메모리(보정/조향 LUT)**를 어떻게 참조하여
    - **채널별 16개 제어(ATT/TTD)**를 어떻게 만들어야 “원하는 빔”이 나오는지
    - 그리고 그게 **시험에서 어떻게 검증**되는지까지가 ‘디지털 빔조향’의 실체다.

- **질문 B) 보정은 왜 2단(MFC1→MFC2)로 나뉘었나?**
  - **채널 보정(MFC1)**: 채널별 이득/지연 오차를 줄여 “합산했을 때 정면으로 잘 모이게” 만드는 단계
  - **각도 보정(MFC2)**: 목표 조향각에서 “의도한 빔이 실제로 그 각도로 가도록” 만드는 단계  
  - 이 문서는 2장(구성) → 3장(보정)에서 이 분리를 **질문으로 검증**한다:  
    “채널 보정만 하면 왜 각도에서 틀어지는가?” → “각도 보정 데이터는 무엇을 대표해야 하는가?”

- **질문 C) 시험은 어떤 순서로 해야 실패 확률이 낮나?**
  - 보정 데이터를 수집하기 전에, 먼저 “무엇을 측정해야 보정이 가능한가?”를 정해야 한다.
  - 특히 **각도 보정**은 근접전계/원거리(또는 안테나 패턴) 측정과 연결될 가능성이 높으므로,  
    5장에서 “근접전계가 정말 필요한가?”를 실험 설계 관점에서 다룬다.

- **질문 D) EEPROM/BRAM 제약이 설계에 주는 영향은?**
  - EEPROM 8비트, TTD+ATT 15비트라는 제약은
    - 저장 형식(스케일링/분할 저장)
    - 전원 시 로드 전략(LUT 구성)
    - 시험 시 디버깅 포인트(값이 제대로 로드/선택/전달되는지)
    를 좌우한다.
  - 따라서 “제어 알고리즘”은 RF만이 아니라 **메모리/정밀도/검증**까지 포함해야 한다.

- **(참고: 개요 자료에서 공통으로 반복되는 포인트)**  
  - 배열이 커질수록 **완전 디지털(DBF)**은 비용·전력·RF 체인 수 문제로 어려워지고, **하이브리드**가 타협점이 된다. (Cadence, IEEE SPS)  
  - 대역폭이 커질수록 **빔 스퀸트**가 문제이며, 이를 완화하기 위해 **TTD(또는 PS+TTD 혼합)**가 논의된다. (Analog Devices, Qorvo)  
  - “유연성은 늘지만 보정/검증이 더 중요해진다”는 메시지가 반복된다. (IEEE SPS)

#### 1장 참고 링크(초록·개요용)
- Analog beamforming / digital beamforming / hybrid 개요: `https://resources.system-analysis.cadence.com/blog/the-basics-of-digital-and-analog-beamforming-with-phased-arrays`
- 5G mmWave 하이브리드 빔포밍의 동기/제약(요약): `https://signalprocessingsociety.org/publications-resources/blog/hybrid-beamforming-5g-millimeter-wave-systems`
- Phase shifter vs TTD, beam squint 개요(요약): `https://www.analog.com/en/resources/technical-articles/true-time-delays-and-phase-shifters.html`
- TTD와 빔 스퀸트 문제(요약): `https://www.qorvo.com/design-hub/blog/true-time-delay-what-is-it-and-how-it-works`

---

## 2. 시스템은 어떻게 구성되어 있는가?

### 2.1 안테나와 고주파 경로 (8채널, 2경로)
- (본문 작성)

### 2.2 MFC1·MFC2와 채널 보정·각도 보정의 역할
- (본문 작성)

### 2.3 제어 모듈과 외부 입력 (주파수, 조향각, 경로 선택)
- (본문 작성)

---

## 3. 보정은 왜, 어떻게 필요한가?

### 3.1 채널 보정의 목적과 데이터 (VNA 가정)
- (본문 작성)

### 3.2 각도 보정의 목적과 데이터 (근접전계 필요 여부)
- (본문 작성)

### 3.3 빔조향 메모리: 조향각별 이론 TTD
- (본문 작성)

---

## 4. 메모리와 제어는 어떻게 이루어지는가?

### 4.1 채널보정·각도보정·빔조향 메모리의 목적과 내용
- (본문 작성)

### 4.2 EEPROM과 BRAM, 전원 시 로드
- (본문 작성)

### 4.3 외부 입력에 따른 메모리 참조와 MFC 제어
- (본문 작성)

---

## 5. 실제로 시험은 어떻게 할 것인가?

### 5.1 보정 데이터 수집 순서와 방법
- (본문 작성)

### 5.2 각도 보정과 근접전계: 필요한가, 어떻게 측정할까
- (본문 작성)

### 5.3 시험 절차와 검증 포인트
- (본문 작성)

---

## 6. 정리 및 열린 질문

### 6.1 요약
- (본문 작성)

### 6.2 참고 자료 및 메모리/제어 상세 (질문 시 추가)
- (본문 작성)

---

*목차 확립 후, 단계 2(글쓰기)에서 위 순서대로 **질문 → 답 → 다음 질문** 흐름으로 본문을 채운다.*
