# Cursor Rules for rldhkstopic Blog Project

This file contains rules and guidelines for AI agents working on this Jekyll-based blog project.

## Project Overview

This is a Jekyll-based static blog site deployed on GitHub Pages and Vercel. The blog publishes technical articles and analysis posts written in Markdown.

**Tech Stack:**
- Jekyll (static site generator)
- GitHub Pages & Vercel (hosting)
- Liquid templating engine
- Custom HTML/CSS layouts
- GitHub OAuth for admin authentication

## Commit Message Rules

**ALWAYS use English for commit messages.**

Format: `Verb in imperative mood: brief description`

Examples:
- `Add GitHub OAuth login modal to write button`
- `Update Vercel deployment documentation`
- `Fix security vulnerabilities in npm packages`
- `Configure Vercel Analytics and Speed Insights`

## Code Style

### File Structure
- Posts: `_posts/YYYY-MM-DD-title.md`
- Layouts: `_layouts/`
- Assets: `assets/css/`, `assets/js/`
- API functions: `api/` (Vercel serverless functions)
- Documentation: `docs/`

### Code Comments
- Use clear, concise comments in English
- Explain "why" not just "what"
- Keep comments up-to-date with code changes

## Writing Style Guide (for blog posts)

When creating or editing blog posts, follow the writing style guide in `docs/GUIDE_WRITING_STYLE.md`.

### Key Rules:
1. **Tone**: Dry, analytical style ending with "~ë‹¤." (no emotions, no emojis)
2. **Structure**: [Situation/Motivation] -> [Action] -> [Environment/Constraints]
3. **Citations**: Use footnote format `[^n]` with `## References` section at the end
4. **Expert Quotes**: Use blockquote format with attribution
5. **Code Explanation**: Show full code first, then extract and explain key lines separately

## Development Workflow

### Local Development
```bash
bundle install
bundle exec jekyll serve
```
- Local server runs on `http://localhost:4000`
- Changes are reflected immediately (except `_config.yml` requires restart)

### Deployment
- **GitHub Pages**: Automatic on push to `main` branch
- **Vercel**: Automatic on push to `main` branch (connected via GitHub)
- Local server changes do NOT automatically deploy to Vercel
- Must push to GitHub for Vercel deployment

### Testing Before Commit
1. Run `bundle exec jekyll build` to check for build errors
2. Test locally with `bundle exec jekyll serve`
3. Verify changes in browser
4. Check for linting errors

## Important Files

- `_config.yml`: Jekyll configuration (requires server restart if modified)
- `vercel.json`: Vercel deployment configuration
- `package.json`: Node.js dependencies
- `Gemfile`: Ruby dependencies
- `.cursorrules`: This file (AI agent guidelines)

## Security Guidelines

1. **Never commit secrets**: Client secrets, API keys, tokens
2. **Environment variables**: Use Vercel/GitHub Secrets for sensitive data
3. **OAuth credentials**: Client ID can be in `_config.yml`, but Client Secret must be in environment variables only

## Common Tasks

### Adding a New Post
1. Create file in `_posts/` with format `YYYY-MM-DD-title.md`
2. Include required front matter (layout, title, date, author, category, tags)
3. Follow writing style guide
4. Update `REF_POSTS_OVERVIEW.md` if needed

### Modifying Layouts
- `_layouts/default.html`: Main site layout
- `_layouts/post.html`: Post page layout
- Test changes across different page types

### Adding Features
- Check existing documentation in `docs/`
- Follow project structure conventions
- Update relevant documentation
- Test locally before committing

## Vercel-Specific

- Serverless functions go in `api/` directory
- Environment variables set in Vercel dashboard
- Analytics and Speed Insights configured in Vercel dashboard
- Custom headers defined in `vercel.json`

## Git Workflow

1. Always check status: `git status`
2. Add changes: `git add .` or specific files
3. Commit with English message: `git commit -m "[v0.0.0] Verb: description"`
   - **ALWAYS include version tag in commit message**: Use format `[vX.Y.Z]` where version is read from `VERSION` file
   - Version format: `v0.0.0` (major.minor.patch)
   - Increment version appropriately:
     - Patch (v0.0.1): Bug fixes, minor styling changes
     - Minor (v0.1.0): New features, significant improvements
     - Major (v1.0.0): Breaking changes, major refactoring
4. Pull before push: `git pull --rebase origin main`
5. **ALWAYS push changes**: `git push origin main`
   - **CRITICAL**: After making any code changes, you MUST commit and push to GitHub
   - Do not leave uncommitted changes
   - Push immediately after committing unless explicitly told otherwise

## Version Management

- Version is stored in `VERSION` file (format: `v0.0.0`)
- **ALWAYS read current version from `VERSION` file before committing**
- Include version tag in every commit message: `[vX.Y.Z]`
- Update `VERSION` file when version changes (increment patch/minor/major as appropriate)
- Version tags help track changes and maintain project history

## Notes

- This project uses both GitHub Pages and Vercel simultaneously
- OAuth callback URLs must match exactly in GitHub OAuth App settings
- Sensitive environment variables cannot be set for Development environment in Vercel
- Always use English for commit messages, code comments, and technical documentation
- **ALWAYS commit and push changes immediately after making modifications**
