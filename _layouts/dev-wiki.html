---
layout: default
---

<div class="dev-wiki-layout">
  <!-- í–„ë²„ê±° ë©”ë‰´ ë²„íŠ¼ (ëª¨ë°”ì¼ ì „ìš©) -->
  <button class="dev-wiki-mobile-toggle" id="devWikiMobileToggle" aria-label="ë©”ë‰´ ì—´ê¸°">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </button>

  <!-- ëª¨ë°”ì¼ ì˜¤ë²„ë ˆì´ -->
  <div class="dev-wiki-mobile-overlay" id="devWikiMobileOverlay"></div>

  <!-- ì¢Œì¸¡ ì‚¬ì´ë“œë°”: ì‹œë¦¬ì¦ˆë³„ íŠ¸ë¦¬ ë©”ë‰´ -->
  <aside class="dev-wiki-sidebar" id="devWikiSidebar">
    <nav class="dev-wiki-nav">
      {% assign all_dev_posts = site.posts | where: "category", "dev" %}
      
      {% comment %} ì‹œë¦¬ì¦ˆë³„ë¡œ ê·¸ë£¹í•‘ {% endcomment %}
      {% assign series_groups = all_dev_posts | group_by: "series" | sort: "name" %}
      
      {% comment %} ì‹œë¦¬ì¦ˆê°€ ì—†ëŠ” í¬ìŠ¤íŠ¸ë“¤ë„ ì²˜ë¦¬ {% endcomment %}
      {% assign ungrouped_posts = all_dev_posts | where_exp: "post", "post.series == nil or post.series == ''" %}
      
      {% comment %} í˜„ì¬ í¬ìŠ¤íŠ¸ì˜ ì‹œë¦¬ì¦ˆ í™•ì¸ {% endcomment %}
      {% assign current_series = page.series | default: "" %}
      
      {% for series_group in series_groups %}
        {% if series_group.name != "" %}
          {% assign series_name = series_group.name %}
          {% assign series_posts = series_group.items | sort: "order" | sort: "date" %}
          {% assign is_current_series = false %}
          {% if page.series == series_name %}
            {% assign is_current_series = true %}
          {% endif %}
          
          <div class="dev-wiki-nav-section {% if is_current_series %}active{% endif %}">
            <div class="dev-wiki-nav-header" onclick="toggleDevWikiSection(this)">
              <span class="dev-wiki-nav-icon">ğŸ“</span>
              <span class="dev-wiki-nav-title">{{ series_name }}</span>
              <svg class="dev-wiki-nav-arrow" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="9 18 15 12 9 6"></polyline>
              </svg>
            </div>
            
            <ul class="dev-wiki-nav-list">
              {% for post in series_posts %}
                {% assign is_current = false %}
                {% if post.url == page.url %}
                  {% assign is_current = true %}
                {% endif %}
                <li class="dev-wiki-nav-item">
                  <a href="{{ post.url | relative_url }}" class="dev-wiki-nav-link {% if is_current %}active{% endif %}">
                    {{ post.title | escape }}
                  </a>
                </li>
              {% endfor %}
            </ul>
          </div>
        {% endif %}
      {% endfor %}
      
      {% comment %} ì‹œë¦¬ì¦ˆê°€ ì—†ëŠ” í¬ìŠ¤íŠ¸ë“¤ {% endcomment %}
      {% if ungrouped_posts.size > 0 %}
        <div class="dev-wiki-nav-section {% unless current_series %}active{% endunless %}">
          <div class="dev-wiki-nav-header" onclick="toggleDevWikiSection(this)">
            <span class="dev-wiki-nav-icon">ğŸ“„</span>
            <span class="dev-wiki-nav-title">ê¸°íƒ€</span>
            <svg class="dev-wiki-nav-arrow" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
          </div>
          
          <ul class="dev-wiki-nav-list">
            {% assign sorted_ungrouped = ungrouped_posts | sort: "date" | reverse %}
            {% for post in sorted_ungrouped %}
              {% assign is_current = false %}
              {% if post.url == page.url %}
                {% assign is_current = true %}
              {% endif %}
              <li class="dev-wiki-nav-item">
                <a href="{{ post.url | relative_url }}" class="dev-wiki-nav-link {% if is_current %}active{% endif %}">
                  {{ post.title | escape }}
                </a>
              </li>
            {% endfor %}
          </ul>
        </div>
      {% endif %}
    </nav>
  </aside>

  <!-- ì¤‘ì•™ ì½˜í…ì¸  ì˜ì—­ -->
  <main class="dev-wiki-content">
    <div class="dev-wiki-doc">
      {{ content }}
    </div>
  </main>

  <!-- ìš°ì¸¡ ToC (Table of Contents) -->
  <aside class="dev-wiki-toc" id="devWikiTOC">
    <div class="dev-wiki-toc-header">
      <h3 class="dev-wiki-toc-title">On this page</h3>
    </div>
    <nav class="dev-wiki-toc-nav">
      <ul class="dev-wiki-toc-list" id="devWikiTOCList"></ul>
    </nav>
  </aside>
</div>

<script>
// ì‚¬ì´ë“œë°” ì„¹ì…˜ í† ê¸€
function toggleDevWikiSection(header) {
  const section = header.parentElement;
  section.classList.toggle('active');
}

// ëª¨ë°”ì¼ ë©”ë‰´ í† ê¸€
document.addEventListener('DOMContentLoaded', function() {
  const mobileToggle = document.getElementById('devWikiMobileToggle');
  const sidebar = document.getElementById('devWikiSidebar');
  const overlay = document.getElementById('devWikiMobileOverlay');
  
  if (mobileToggle && sidebar && overlay) {
    function openSidebar() {
      sidebar.classList.add('mobile-open');
      overlay.classList.add('active');
      document.body.style.overflow = 'hidden';
    }
    
    function closeSidebar() {
      sidebar.classList.remove('mobile-open');
      overlay.classList.remove('active');
      document.body.style.overflow = '';
    }
    
    mobileToggle.addEventListener('click', openSidebar);
    overlay.addEventListener('click', closeSidebar);
    
    // ESC í‚¤ë¡œ ë‹«ê¸°
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape' && sidebar.classList.contains('mobile-open')) {
        closeSidebar();
      }
    });
  }
  
  // í˜„ì¬ í˜ì´ì§€ í•˜ì´ë¼ì´íŠ¸ ë° ìë™ í¼ì¹¨
  const currentPath = window.location.pathname;
  const navLinks = document.querySelectorAll('.dev-wiki-nav-link');
  
  navLinks.forEach(link => {
    if (link.getAttribute('href') === currentPath || link.href === window.location.href) {
      link.classList.add('active');
      // ë¶€ëª¨ ì„¹ì…˜ í¼ì¹˜ê¸°
      let parent = link.closest('.dev-wiki-nav-section');
      if (parent) {
        parent.classList.add('active');
      }
    }
  });
  
  // ToC ìƒì„± (h1~h3ë§Œ)
  const content = document.querySelector('.dev-wiki-doc');
  const tocList = document.getElementById('devWikiTOCList');
  
  if (content && tocList) {
    const headings = content.querySelectorAll('h1, h2, h3');
    
    if (headings.length > 0) {
      headings.forEach((heading, index) => {
        // ID ìƒì„±
        let id = heading.id;
        if (!id) {
          id = 'heading-' + index;
          heading.id = id;
        }
        
        const level = parseInt(heading.tagName.charAt(1));
        const li = document.createElement('li');
        li.className = `dev-wiki-toc-item toc-level-${level}`;
        
        const a = document.createElement('a');
        a.href = `#${id}`;
        a.textContent = heading.textContent.trim();
        a.addEventListener('click', (e) => {
          e.preventDefault();
          const element = document.getElementById(id);
          if (element) {
            const header = document.querySelector('.site-header');
            const headerHeight = header ? header.offsetHeight + 20 : 100;
            const elementPosition = element.getBoundingClientRect().top + window.pageYOffset;
            const offsetPosition = elementPosition - headerHeight;
            
            window.scrollTo({
              top: offsetPosition,
              behavior: 'smooth'
            });
            window.history.pushState(null, '', `#${id}`);
          }
        });
        
        li.appendChild(a);
        tocList.appendChild(li);
      });
      
      // ìŠ¤í¬ë¡¤ í•˜ì´ë¼ì´íŠ¸
      const header = document.querySelector('.site-header');
      const headerHeight = header ? header.offsetHeight + 20 : 100;
      
      function updateActiveTOC() {
        if (headings.length === 0) return;
        
        const scrollPosition = window.scrollY + headerHeight + 100;
        let activeHeading = headings[0];
        
        for (let i = headings.length - 1; i >= 0; i--) {
          const heading = headings[i];
          const rect = heading.getBoundingClientRect();
          const headingTop = rect.top + window.scrollY;
          
          if (headingTop <= scrollPosition) {
            activeHeading = heading;
            break;
          }
        }
        
        if (activeHeading && tocList) {
          const id = activeHeading.id;
          tocList.querySelectorAll('a').forEach(link => {
            link.classList.remove('active');
            if (link.getAttribute('href') === `#${id}`) {
              link.classList.add('active');
            }
          });
        }
      }
      
      // ì´ˆê¸° ìƒíƒœ ì—…ë°ì´íŠ¸
      setTimeout(updateActiveTOC, 200);
      
      // ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸
      let ticking = false;
      const handleScroll = () => {
        if (!ticking) {
          window.requestAnimationFrame(() => {
            updateActiveTOC();
            ticking = false;
          });
          ticking = true;
        }
      };
      
      window.addEventListener('scroll', handleScroll, { passive: true });
    } else {
      // ToCê°€ ì—†ìœ¼ë©´ ìˆ¨ê¸°ê¸°
      const toc = document.getElementById('devWikiTOC');
      if (toc) toc.style.display = 'none';
    }
  }
});
</script>
